<section id="experience" class="section">
    <div class="container">
        <h2 class="section-heading">Work Experience</h2>
        <div class="card-container">
            {% for item in site.data.experience %}
            <div class="card slide-card">
                {% if item.logo %}
                <div class="icon">
                    <img src="/assets/img/experience/{{ item.logo }}" alt="{{ item.company }} logo" loading="lazy">
                </div>
                {% endif %}
                <div class="info">
                    <p class="title">{{ item.role }}</p>
                    <p class="location">{{ item.company }}</p>
                    <p class="dates">{{ item.dates }}</p>
                    <p class="desc">{{ item.desc }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<script>
(function() {
    var cards = document.querySelectorAll('.slide-card');
    cards.forEach(function(card, i) {
        var fromLeft = (i % 2 === 0);
        card.style.opacity = '0';
        card.style.transform = fromLeft ? 'translateX(-80px)' : 'translateX(80px)';
    });

    var animated = false;
    function animateCards() {
        if (animated) return;
        var section = document.getElementById('experience');
        if (!section) return;
        var rect = section.getBoundingClientRect();
        if (rect.top < window.innerHeight && rect.bottom > 0) {
            animated = true;
            cards.forEach(function(card, i) {
                setTimeout(function() {
                    card.style.transition = 'opacity 0.7s ease-out, transform 0.7s ease-out';
                    card.style.opacity = '1';
                    card.style.transform = 'translateX(0)';
                }, i * 200);
            });
            window.removeEventListener('scroll', animateCards);
        }
    }

    window.addEventListener('scroll', animateCards);
    window.addEventListener('load', animateCards);
})();
</script>
