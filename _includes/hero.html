<section id="about" class="hero">
    <div class="hero-content">
        <div class="hero-photo-wrapper">
            <img src="/assets/img/logo.jpg" alt="Photo of {{ site.title }}" class="hero-photo" loading="lazy">
        </div>
        <h1>{{ site.title }}</h1>
        <p class="hero-role" id="hero-role-text">Network Engineer</p>
        <div class="hero-badges">
            <span class="badge"><i class="fas fa-network-wired"></i> Cisco Catalyst &amp; Nexus</span>
            <span class="badge"><i class="fab fa-python"></i> Python Automation</span>
            <span class="badge"><i class="fas fa-hospital"></i> Healthcare Infrastructure</span>
            <span class="badge"><i class="fas fa-certificate"></i> CCNA</span>
            <span class="badge"><i class="fas fa-certificate"></i> Network+</span>
        </div>
        <p class="hero-bio">{{ site.bio }}</p>
        <div class="hero-links">
            <a href="https://github.com/{{ site.github_username }}" class="btn-primary-custom" target="_blank" rel="noopener">
                <i class="fab fa-github"></i> GitHub
            </a>
            {% if site.linkedin_username and site.linkedin_username != "" %}
            <a href="https://linkedin.com/in/{{ site.linkedin_username }}" class="btn-outline-custom" target="_blank" rel="noopener">
                <i class="fab fa-linkedin"></i> LinkedIn
            </a>
            {% endif %}
            <a href="mailto:{{ site.email }}" class="btn-outline-custom">
                <i class="fas fa-envelope"></i> Email
            </a>
        </div>
    </div>
</section>

<script>
// ── Entry animations ──────────────────────────────────────────────────────────
(function() {
    var items = [
        { sel: '.hero-photo-wrapper', from: 'opacity:0;transform:scale(0.5)', to: 'opacity:1;transform:scale(1)', dur: '0.8s', delay: 300 },
        { sel: '.hero h1', from: 'opacity:0;transform:translateX(-60px)', to: 'opacity:1;transform:translateX(0)', dur: '0.7s', delay: 600 },
        { sel: '.hero-role', from: 'opacity:0;transform:translateX(60px)', to: 'opacity:1;transform:translateX(0)', dur: '0.7s', delay: 800 },
        { sel: '.hero-badges', from: 'opacity:0;transform:translateY(20px)', to: 'opacity:1;transform:translateY(0)', dur: '0.6s', delay: 1000 },
        { sel: '.hero-bio', from: 'opacity:0;transform:translateY(40px)', to: 'opacity:1;transform:translateY(0)', dur: '0.7s', delay: 1200 },
        { sel: '.hero-links', from: 'opacity:0;transform:translateY(40px)', to: 'opacity:1;transform:translateY(0)', dur: '0.7s', delay: 1500 }
    ];

    items.forEach(function(item) {
        var el = document.querySelector(item.sel);
        if (el) el.style.cssText += item.from;
    });

    window.addEventListener('load', function() {
        items.forEach(function(item) {
            var el = document.querySelector(item.sel);
            if (!el) return;
            setTimeout(function() {
                el.style.transition = 'opacity ' + item.dur + ' ease-out, transform ' + item.dur + ' ease-out';
                el.style.cssText += item.to;
            }, item.delay);
        });
    });
})();

// ── Typewriter effect ─────────────────────────────────────────────────────────
(function() {
    var phrases = [
        'Network Engineer',
        'Infrastructure Specialist',
        'Homelab Enthusiast'
    ];

    // Timing constants (ms)
    var TYPE_SPEED   = 65;   // ms per character typed
    var DELETE_SPEED = 35;   // ms per character deleted
    var PAUSE_AFTER  = 2200; // pause before deleting
    var PAUSE_BEFORE = 400;  // pause between delete-done and next phrase
    // Delay before typewriter starts — must clear the entry animation
    // (.hero-role fades in at 800ms after load over 700ms = ~1500ms total)
    var START_DELAY  = 2600;

    var el = document.getElementById('hero-role-text');
    if (!el) return;

    var phraseIndex  = 0;
    var charIndex    = 0;
    var isDeleting   = false;

    // Add cursor class so CSS can render the blinking pipe
    el.classList.add('hero-role--typing');

    function tick() {
        var current = phrases[phraseIndex];

        if (isDeleting) {
            // Remove one character
            charIndex--;
            el.textContent = current.slice(0, charIndex);

            if (charIndex === 0) {
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length;
                setTimeout(tick, PAUSE_BEFORE);
            } else {
                setTimeout(tick, DELETE_SPEED);
            }
        } else {
            // Add one character
            charIndex++;
            el.textContent = current.slice(0, charIndex);

            if (charIndex === current.length) {
                // Finished typing — pause then start deleting
                setTimeout(function() {
                    isDeleting = true;
                    tick();
                }, PAUSE_AFTER);
            } else {
                setTimeout(tick, TYPE_SPEED);
            }
        }
    }

    // Wait for page load, then wait for entry animation to clear
    window.addEventListener('load', function() {
        setTimeout(function() {
            // Clear the static text so the cursor blinks alone briefly
            charIndex = 0;
            el.textContent = '';
            tick();
        }, START_DELAY);
    });
})();
</script>
